(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2184:function(e,t,r){Promise.resolve().then(r.t.bind(r,972,23)),Promise.resolve().then(r.bind(r,1584)),Promise.resolve().then(r.bind(r,8316))},1584:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var n=r(1229),s=r(1250),a=r(1198);function i(){let e=(0,s.useRouter)(),t=(0,s.usePathname)(),r=r=>{t!==r&&e.push(r)};return(0,n.useEffect)(()=>{let e=e=>{if(!function(e){var t;if(!e)return!1;let r=null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase();return"input"===r||"textarea"===r||!0===e.isContentEditable}(e.target)&&!e.repeat){if(e.ctrlKey&&("s"===e.key||"S"===e.key)){e.preventDefault(),r("/log");return}switch(e.key){case"Escape":r("/");break;case"i":case"I":r("/inventory");break;case"q":case"Q":r("/quests");break;case"f":case"F":r("/forge");break;case"-":r("/log")}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t]),(0,a.D)(e=>{switch(e){case"system":r("/");break;case"inventory":r("/inventory");break;case"quests":r("/quests");break;case"forge":r("/forge");break;case"log":r("/log")}}),null}},8316:function(e,t,r){"use strict";r.d(t,{default:function(){return p}});var n=r(9533),s=r(1229),a=r(9812),i=r.n(a);function l(e){let{onMenuClick:t}=e;return(0,n.jsx)("header",{className:"sticky top-0 z-40 bg-temple/70 backdrop-blur border-b border-white/10",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-3 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("button",{id:"nav-menu-button","aria-label":"Open navigation",onClick:t,className:"card px-2 py-1",children:"☰"}),(0,n.jsx)(i(),{href:"/",className:"font-display text-xl title-shadow hover:opacity-90",children:"Forge & Field"})]}),(0,n.jsx)("nav",{className:"flex items-center gap-2",children:(0,n.jsx)(i(),{href:"/",className:"card px-3 py-1 hover:opacity-90",children:"Home"})})]})})}var o=r(1250),c=r(1790),u=r(7822);function d(e){let{open:t,onClose:r}=e,s=(0,o.usePathname)();return(0,n.jsx)(c.M,{children:t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.E.div,{className:"fixed inset-0 bg-black/40 z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r}),(0,n.jsxs)(u.E.aside,{className:"fixed left-0 top-0 bottom-0 w-72 bg-temple/95 backdrop-blur border-r border-white/10 z-50",initial:{x:-320},animate:{x:0},exit:{x:-320},children:[(0,n.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between border-b border-white/10",children:[(0,n.jsx)("div",{className:"font-display text-xl",children:"Navigate"}),(0,n.jsx)("button",{onClick:r,className:"card px-2 py-1 text-sm",children:"Close"})]}),(0,n.jsx)("nav",{className:"p-3 space-y-2",children:[{href:"/",label:"Home"},{href:"/inventory",label:"Inventory"},{href:"/quests",label:"Quests"},{href:"/forge",label:"Forge"},{href:"/log",label:"Adventure Log"}].map(e=>{let t=s===e.href;return(0,n.jsx)(i(),{href:e.href,onClick:r,className:"block card px-3 py-2 ".concat(t?"ring-2 ring-gold":""),children:e.label},e.href)})})]})]})})}var f=r(1198);let m=[{path:"/",title:"Welcome to PLM",selector:"#explore-card",body:["PLM (Product Lifecycle Management) keeps items, changes, and history in sync from idea → release.","This quick tour hops across pages and explains the core pieces."]},{path:"/inventory",title:"Inventory = Items & Revisions",selector:"#inventory-grid",body:["Browse parts like swords, shields, and tools — each with a revision (Rev A, Rev B…).","Track suppliers, cost, and health, so teams use the right revision."]},{path:"/quests",title:"Requests = Incoming Work",selector:"#quest-map",body:["Requests collect issues and improvements. Prioritize them and link to affected items.","Progress moves through investigate → fix → verify → close."]},{path:"/forge",title:"Forge = Changes (ECOs)",selector:"#combine-area",body:["Craft variants and propose changes (ECOs) when ready.","Combine components, preview impact, and “forge” an updated design."]},{path:"/log",title:"Adventure Log = Audit",selector:"#adventure-log",body:["Every change leaves breadcrumbs — helpful for compliance and storytelling.","Record results, share release notes, and keep teams aligned."]},{path:"/",title:"You're all set!",selector:"#nav-menu-button",body:["Explore freely. Use the header ☰ to jump anywhere. Have fun!"]}];function h(){let e=(0,o.usePathname)(),t=(0,o.useRouter)(),r=(0,o.useSearchParams)(),a="plm"===r.get("tour"),i=Math.max(0,Math.min(m.length-1,parseInt(r.get("step")||"1",10)-1)),l=m[i],c=l.selector,[u,d]=(0,s.useState)(0),h=(0,s.useMemo)(()=>{if(!a||!c)return null;let e=document.querySelector(c);if(!e)return null;let t=e.getBoundingClientRect();return e.scrollIntoView({block:"center",inline:"center",behavior:"smooth"}),t},[a,c,e,i,u]);(0,s.useEffect)(()=>{if(!a)return;let e=()=>d(e=>e+1);return window.addEventListener("resize",e),window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e,!0)}},[a]),(0,s.useEffect)(()=>{a&&e!==l.path&&t.push("".concat(l.path,"?tour=plm&step=").concat(i+1))},[a,e,l.path,i,t]);let p=e=>{let r=Math.max(0,Math.min(m.length-1,e)),n=m[r];t.push("".concat(n.path,"?tour=plm&step=").concat(r+1))},x=()=>{try{localStorage.setItem("ff_tour_done","1")}catch(e){}t.push(e)};return((0,s.useEffect)(()=>{if(!a)return;let e=e=>{"Escape"===e.key?x():"ArrowRight"===e.key||"Enter"===e.key?p(i+1):("ArrowLeft"===e.key||"Backspace"===e.key)&&p(i-1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,i]),(0,f.D)(e=>{a&&("right"===e||"confirm"===e?p(i+1):("left"===e||"back"===e)&&p(i-1))}),a)?(0,n.jsxs)("div",{className:"fixed inset-0 z-[60] pointer-events-none",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/30"}),h&&(0,n.jsx)("div",{className:"absolute border-2 border-gold rounded-xl shadow-soft",style:{left:h.left-8,top:h.top-8,width:h.width+16,height:h.height+16,pointerEvents:"none"}}),(0,n.jsx)("div",{className:"pointer-events-auto absolute left-1/2 top-6 -translate-x-1/2 w-[min(720px,92vw)]",children:(0,n.jsxs)("div",{className:"glass p-4 rounded-2xl",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-display text-xl mb-1",children:l.title}),(0,n.jsx)("ul",{className:"list-disc ml-5 space-y-1 text-sm",children:l.body.map((e,t)=>(0,n.jsx)("li",{children:e},t))})]}),(0,n.jsx)("button",{onClick:x,className:"card px-2 py-1 text-sm",children:"Skip"})]}),(0,n.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"text-xs opacity-70",children:["Step ",i+1," / ",m.length]}),(0,n.jsx)("div",{className:"flex gap-1",children:m.map((e,t)=>(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full ".concat(t===i?"bg-gold":"bg-white/40")},t))})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:()=>p(i-1),disabled:0===i,className:"card px-3 py-1 text-sm ".concat(0===i?"opacity-50":""),children:"Back"}),i<m.length-1?(0,n.jsx)("button",{onClick:()=>p(i+1),className:"card px-3 py-1 text-sm",children:"Next"}):(0,n.jsx)("button",{onClick:x,className:"card px-3 py-1 text-sm",children:"Finish"})]})]})]})})]}):null}function p(e){let{children:t}=e,[r,a]=(0,s.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l,{onMenuClick:()=>a(!0)}),(0,n.jsx)(d,{open:r,onClose:()=>a(!1)}),(0,n.jsx)(h,{}),(0,n.jsx)("main",{className:"max-w-6xl mx-auto p-6",children:t})]})}},1198:function(e,t,r){"use strict";r.d(t,{D:function(){return a}});var n=r(1229);let s={9:"system",4:"inventory",5:"quests",7:"forge",0:"confirm",1:"back",12:"up",13:"down",14:"left",15:"right"};function a(e){let t=(0,n.useRef)(),r=(0,n.useRef)({});(0,n.useEffect)(()=>{let n=()=>{var a,i;let l=((null===(a=(i=navigator).getGamepads)||void 0===a?void 0:a.call(i))||[])[0];l&&l.buttons.forEach((t,n)=>{let a=!0===r.current[n];if(t.pressed&&!a){let t=s[n];t&&e(t)}r.current[n]=t.pressed}),t.current=requestAnimationFrame(n)};return t.current=requestAnimationFrame(n),()=>cancelAnimationFrame(t.current||0)},[e])}},1250:function(e,t,r){"use strict";var n=r(7797);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},972:function(){},1790:function(e,t,r){"use strict";r.d(t,{M:function(){return x}});var n=r(1229),s=r(6310);function a(){let e=(0,n.useRef)(!1);return(0,s.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var i=r(2686),l=r(6714),o=r(634);class c extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:e,isPresent:t}){let r=(0,n.useId)(),s=(0,n.useRef)(null),a=(0,n.useRef)({width:0,height:0,top:0,left:0});return(0,n.useInsertionEffect)(()=>{let{width:e,height:n,top:i,left:l}=a.current;if(t||!s.current||!e||!n)return;s.current.dataset.motionPopId=r;let o=document.createElement("style");return document.head.appendChild(o),o.sheet&&o.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${n}px !important;
            top: ${i}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(o)}},[t]),n.createElement(c,{isPresent:t,childRef:s,sizeRef:a},n.cloneElement(e,{ref:s}))}let d=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:i,mode:c})=>{let d=(0,o.h)(f),m=(0,n.useId)(),h=(0,n.useMemo)(()=>({id:m,initial:t,isPresent:r,custom:a,onExitComplete:e=>{for(let t of(d.set(e,!0),d.values()))if(!t)return;s&&s()},register:e=>(d.set(e,!1),()=>d.delete(e))}),i?void 0:[r]);return(0,n.useMemo)(()=>{d.forEach((e,t)=>d.set(t,!1))},[r]),n.useEffect(()=>{r||d.size||!s||s()},[r]),"popLayout"===c&&(e=n.createElement(u,{isPresent:r},e)),n.createElement(l.O.Provider,{value:h},e)};function f(){return new Map}var m=r(9755),h=r(8484);let p=e=>e.key||"",x=({children:e,custom:t,initial:r=!0,onExitComplete:l,exitBeforeEnter:o,presenceAffectsLayout:c=!0,mode:u="sync"})=>{var f;(0,h.k)(!o,"Replace exitBeforeEnter with mode='wait'");let x=(0,n.useContext)(m.p).forceRender||function(){let e=a(),[t,r]=(0,n.useState)(0),s=(0,n.useCallback)(()=>{e.current&&r(t+1)},[t]);return[(0,n.useCallback)(()=>i.Wi.postRender(s),[s]),t]}()[0],v=a(),g=function(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}(e),y=g,b=(0,n.useRef)(new Map).current,k=(0,n.useRef)(y),w=(0,n.useRef)(new Map).current,E=(0,n.useRef)(!0);if((0,s.L)(()=>{E.current=!1,function(e,t){e.forEach(e=>{let r=p(e);t.set(r,e)})}(g,w),k.current=y}),f=()=>{E.current=!0,w.clear(),b.clear()},(0,n.useEffect)(()=>()=>f(),[]),E.current)return n.createElement(n.Fragment,null,y.map(e=>n.createElement(d,{key:p(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:c,mode:u},e)));y=[...y];let j=k.current.map(p),N=g.map(p),C=j.length;for(let e=0;e<C;e++){let t=j[e];-1!==N.indexOf(t)||b.has(t)||b.set(t,void 0)}return"wait"===u&&b.size&&(y=[]),b.forEach((e,r)=>{if(-1!==N.indexOf(r))return;let s=w.get(r);if(!s)return;let a=j.indexOf(r),i=e;i||(i=n.createElement(d,{key:p(s),isPresent:!1,onExitComplete:()=>{b.delete(r);let e=Array.from(w.keys()).filter(e=>!N.includes(e));if(e.forEach(e=>w.delete(e)),k.current=g.filter(t=>{let n=p(t);return n===r||e.includes(n)}),!b.size){if(!1===v.current)return;x(),l&&l()}},custom:t,presenceAffectsLayout:c,mode:u},s),b.set(r,i)),y.splice(a,0,i)}),y=y.map(e=>{let t=e.key;return b.has(t)?e:n.createElement(d,{key:p(e),isPresent:!0,presenceAffectsLayout:c,mode:u},e)}),n.createElement(n.Fragment,null,b.size?y:y.map(e=>(0,n.cloneElement)(e)))}}},function(e){e.O(0,[557,822,812,170,842,744],function(){return e(e.s=2184)}),_N_E=e.O()}]);